<?xml version="1.0" encoding="utf-8" ?>
<Root>
  <Header>
    <DateFormat>dd/MM/yyyy </DateFormat>
    <FileSegments>HEAD LINE VAT  TLR                 </FileSegments>
  </Header>
  <TransactionType>810</TransactionType>
  <MostParentTable>INVOICE_HEADER_T</MostParentTable>
  <MostChildTable>INVOICE_DETAILS_T</MostChildTable>
  <Relations>
    <Source>
      <Add>
        <Relation>
          <ParentTable>INVOICE_HEADER_T</ParentTable>
          <ParentColumns>
            <Column>INVOICE_HEADER_KEY</Column>
          </ParentColumns>
          <ChildTable>INVOICE_LOCATIONS_T</ChildTable>
          <ChildColumns>
            <Column>INVOICE_HEADER_KEY</Column>
          </ChildColumns>
        </Relation>
        <Relation>
          <ParentTable>INVOICE_LOCATIONS_T</ParentTable>
          <ParentColumns>
            <Column>INVOICE_HEADER_KEY</Column>
            <Column>LOCATION_TYPE</Column>
          </ParentColumns>
          <ChildTable>INVOICE_CHARGES_T</ChildTable>
          <ChildColumns>
            <Column>INVOICE_HEADER_KEY</Column>
            <Column>LOCATION_TYPE</Column>
          </ChildColumns>
        </Relation>
        <Relation>
          <ParentTable>INVOICE_CHARGES_T</ParentTable>
          <ParentColumns>
            <Column>INVOICE_CHARGES_KEY</Column>
          </ParentColumns>
          <ChildTable>INVOICE_DETAILS_T</ChildTable>
          <ChildColumns>
            <Column>INVOICE_CHARGES_KEY</Column>
          </ChildColumns>
        </Relation>
      </Add>
    </Source>
  </Relations>
  <Map>
    <Variable>[HEAD]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>H-01</Loop>
    <Fixed>HEAD</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MSENDERID</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>SENDER_ID</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MRECEIVERID</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>PARTNER_ID</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable Temp="true">MSTORE_TempData1</Variable>
    <Table>INVOICE_LOCATIONS_T</Table>
    <Column>LOCATION_TYPE</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MSTORE</Variable>
    <Table>INVOICE_LOCATIONS_T</Table>
    <Column>LOCATION</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition Type="String" lhsSource="Dictionary" rhsSource="Map">MSTORE_TempData1 == ST</Condition>
  </Map>
  <Map>
    <Variable>MCUSTSTORE</Variable>
    <Table>INVOICE_LOCATIONS_T</Table>
    <Column>LOCATION</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition Type="String" lhsSource="Dictionary" rhsSource="Map">MSTORE_TempData1 == SF</Condition>
  </Map>
  <Map>
    <Variable>XINVOICE</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>INVOICE_NUMBER</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MINVDTE</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>DATE</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MCUSTPO</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>RETAILER_PO</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MENTERED</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>RETAILER_PO_DATE</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MSHIPDATE</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>SHIP_DATE</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MTERMS_DAT</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>TERMS_DESCRIPTION</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MDUEDATE</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>TERMS_NET_DUE_DATE</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>[N]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>H-01</Loop>
    <Fixed>N</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MSTOREGLN</Variable>
    <Table>INVOICE_LOCATIONS_T</Table>
    <Column>GLN_NUMBER</Column>
    <Loop>H-01</Loop>
    <Fixed></Fixed>
    <Condition Type="String" lhsSource="Dictionary" rhsSource="Map">MSTORE_TempData1 == ST</Condition>
  </Map>
  <Map>
    <Variable>[LINE]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed>LINE</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MSTYLE</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>VENDOR_STYLE</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XPCKQTY</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>INNER_PACK</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition Type="Decimal" lhsSource="Dictionary" rhsSource="Map">XPCKQTY != 0</Condition>
  </Map>
  <Map>
    <Variable>XTOTQTY</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>QUANTITY_INVOICED</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XGRSPRICE</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>GROSS_PRICE</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XDISC_PCNT</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>DISCOUNT_PERCENT</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable  Temp="true">XLNDSCAMT_TempData1</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed  Type="Decimal" lhsSource="Dictionary" rhsSource="Dictionary">XTOTQTY*XGRSPRICE</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable  Temp="true">XLNDSCAMT_TempData2</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed  Type="Decimal" lhsSource="Dictionary" rhsSource="Map">XDISC_PCNT/100</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XLNDSCAMT</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed  Type="Decimal"  lhsSource="Dictionary" rhsSource="Dictionary">XLNDSCAMT_TempData1*XLNDSCAMT_TempData2</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XPRICE</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>UNIT_PRICE</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XTAXRATE</Variable>
    <Table>INVOICE_CHARGES_T</Table>
    <Column>VatPercent</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XTOTQTY*XGRSPRICE</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed   Type="Decimal" lhsSource="Dictionary" rhsSource="Dictionary">XTOTQTY*XGRSPRICE</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XTOTQTY*XPRICE</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed  Type="Decimal" lhsSource="Dictionary" rhsSource="Dictionary">XTOTQTY*XPRICE</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>[N]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed>N</Fixed>
    <Condition Type="Decimal" lhsSource="Dictionary" rhsSource="Map">XDISC_PCNT == 0</Condition>
  </Map>
  <Map>
    <Variable>[Y]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>D-01</Loop>
    <Fixed>Y</Fixed>
    <Condition Type="Decimal" lhsSource="Dictionary" rhsSource="Map">XDISC_PCNT > 0</Condition>
  </Map>
  <Map>
    <Variable>XUPC</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>UPC_NUMBER</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>

  <Map>
    <Variable>XSKU</Variable>
    <Table>INVOICE_DETAILS_T</Table>
    <Column>BUYER_ITEM</Column>
    <Loop>D-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>[VAT]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>T-01</Loop>
    <Fixed>VAT</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XTAXRATE</Variable>
    <Table>INVOICE_CHARGES_T</Table>
    <Column>VatPercent</Column>
    <Loop>T-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>MCTT</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>T-01</Loop>
    <Fixed>LinesCount(INVOICE_DETAILS_T)</Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XSHIPAMT</Variable>
    <Table>INVOICE_HEADER_T</Table>
    <Column>SHIP_AMOUNT</Column>
    <Loop>T-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XDISC</Variable>
    <Table>INVOICE_CHARGES_T</Table>
    <Column>C310Amount</Column>
    <Loop>T-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>XTAX</Variable>
    <Table>INVOICE_CHARGES_T</Table>
    <Column>VatAmount</Column>
    <Loop>T-01</Loop>
    <Fixed></Fixed>
    <Condition></Condition>
  </Map>
  <Map>
    <Variable>[TLR]</Variable>
    <Table></Table>
    <Column></Column>
    <Loop>T-01</Loop>
    <Fixed>TLR</Fixed>
    <Condition></Condition>
  </Map>
</Root>